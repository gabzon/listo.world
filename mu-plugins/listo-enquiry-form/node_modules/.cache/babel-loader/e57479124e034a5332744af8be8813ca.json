{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/gabriel/Sites/listo.world/web/app/mu-plugins/listo-enquiry-form/src/enquiry-form/components/form/destination/Destination.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext } from 'react';\nimport { EnquiryContext } from '../../../states/EnquiryContext';\nimport { Form, Input, Icon } from 'antd';\nimport { FormattedMessage, useIntl } from 'react-intl'; //import GooglePlacesAutocomplete from 'react-google-places-autocomplete';\n//import PlacesAutocomplete, { Suggestion } from \"react-places-autocomplete\";\n//https://gist.github.com/PhilipTKC/7ba3fbdc1d7faa2bfcb846d6dac2491e\n// http://www.geonames.org/\n// http://geobytes.com/free-ajax-cities-jsonp-api/\n// https://github.com/lutangar/cities.json\n// https://datahub.io/core/country-list\n// https://peric.github.io/GetCountries/\n// https://restcountries.eu\n// http://country.io\n// https://gist.github.com/Keeguon/2310008\n\nlet id = 1;\nlet dest = [];\n\nconst Destination = (_ref) => {\n  let form = _ref.form;\n  const intl = useIntl();\n  const getFieldDecorator = form.getFieldDecorator,\n        getFieldValue = form.getFieldValue;\n\n  const _useContext = useContext(EnquiryContext),\n        _useContext2 = _slicedToArray(_useContext, 2),\n        enquiry = _useContext2[0],\n        setEnquiry = _useContext2[1];\n\n  const updateDestination = e => {\n    const value = e.target.value;\n    const key = e.target.id;\n    const keyID = key.charAt(20);\n    dest[keyID] = value;\n    setEnquiry(prevEnquiy => {\n      return _objectSpread({}, prevEnquiy, {\n        destination: dest\n      });\n    });\n  };\n\n  const remove = k => {\n    const keys = form.getFieldValue('keys');\n\n    if (keys.length === 1) {\n      return;\n    }\n\n    console.log(k);\n    dest.splice(k, 1);\n    console.log(enquiry.destination);\n    form.setFieldsValue({\n      keys: keys.filter(key => key !== k)\n    });\n    setEnquiry(prevEnquiy => {\n      return _objectSpread({}, prevEnquiy, {\n        destination: dest\n      });\n    });\n  };\n\n  const addDestination = () => {\n    const keys = form.getFieldValue('keys');\n    const nextKeys = keys.concat(id++);\n    form.setFieldsValue({\n      keys: nextKeys\n    });\n  };\n\n  const destinationFieldOptions = {\n    validateTrigger: ['onChange', 'onBlur'],\n    rules: [{\n      required: true,\n      message: React.createElement(FormattedMessage, {\n        id: \"Destination.required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })\n    }]\n  };\n  const formItemLayout = {\n    labelCol: {\n      xs: {\n        span: 24\n      },\n      sm: {\n        span: 5\n      }\n    },\n    wrapperCol: {\n      xs: {\n        span: 24\n      },\n      sm: {\n        span: 18\n      }\n    }\n  };\n  const formItemLayoutWithOutLabel = {\n    wrapperCol: {\n      xs: {\n        span: 24,\n        offset: 0\n      },\n      sm: {\n        span: 18,\n        offset: 5\n      }\n    }\n  };\n  getFieldDecorator('keys', {\n    initialValue: [0]\n  });\n  const keys = getFieldValue('keys');\n\n  const addMoreDestinations = () => {\n    if (enquiry.roundTrip === 'multiple') {\n      return true;\n    }\n\n    return false;\n  };\n\n  const destinationInputField = () => React.createElement(Input, {\n    placeholder: intl.formatMessage({\n      id: \"Destination.placeholder\"\n    }),\n    style: {\n      width: '90%',\n      marginRight: 5\n    },\n    size: \"large\",\n    onChange: updateDestination,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  });\n\n  const formItems = keys.map((k, index) => React.createElement(Form.Item, Object.assign({}, index === 0 ? formItemLayout : formItemLayoutWithOutLabel, {\n    label: index === 0 ? React.createElement(FormattedMessage, {\n      id: \"Destination.label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }) : '',\n    required: false,\n    key: k,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), \" \", getFieldDecorator(`destination[${k}]`, destinationFieldOptions)(destinationInputField()), \" \", keys.length > 1 ? React.createElement(Icon, {\n    className: \"dynamic-delete-button\",\n    type: \"minus-circle-o\",\n    onClick: () => remove(k),\n    style: {\n      margin: '0 5px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }) : null, \" \", addMoreDestinations() ? React.createElement(Icon, {\n    className: \"dynamic-delete-button\",\n    type: \"plus-circle-o\",\n    onClick: () => addDestination(k),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }) : null));\n  return React.createElement(React.Fragment, null, formItems);\n};\n\nexport default Destination;","map":{"version":3,"sources":["/Users/gabriel/Sites/listo.world/web/app/mu-plugins/listo-enquiry-form/src/enquiry-form/components/form/destination/Destination.js"],"names":["React","useContext","EnquiryContext","Form","Input","Icon","FormattedMessage","useIntl","id","dest","Destination","form","intl","getFieldDecorator","getFieldValue","enquiry","setEnquiry","updateDestination","e","value","target","key","keyID","charAt","prevEnquiy","destination","remove","k","keys","length","console","log","splice","setFieldsValue","filter","addDestination","nextKeys","concat","destinationFieldOptions","validateTrigger","rules","required","message","formItemLayout","labelCol","xs","span","sm","wrapperCol","formItemLayoutWithOutLabel","offset","initialValue","addMoreDestinations","roundTrip","destinationInputField","formatMessage","width","marginRight","formItems","map","index","margin"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport { EnquiryContext } from '../../../states/EnquiryContext';\nimport { Form, Input, Icon } from 'antd';\nimport { FormattedMessage, useIntl } from 'react-intl';\n//import GooglePlacesAutocomplete from 'react-google-places-autocomplete';\n//import PlacesAutocomplete, { Suggestion } from \"react-places-autocomplete\";\n//https://gist.github.com/PhilipTKC/7ba3fbdc1d7faa2bfcb846d6dac2491e\n// http://www.geonames.org/\n// http://geobytes.com/free-ajax-cities-jsonp-api/\n// https://github.com/lutangar/cities.json\n// https://datahub.io/core/country-list\n// https://peric.github.io/GetCountries/\n// https://restcountries.eu\n// http://country.io\n// https://gist.github.com/Keeguon/2310008\n\nlet id = 1;\nlet dest = [];\n\nconst Destination = ({ form }) => {\n    const intl = useIntl();\n    const { getFieldDecorator, getFieldValue } = form;\n    const [enquiry, setEnquiry] = useContext(EnquiryContext);\n\n    const updateDestination = (e) => {\n        const value = e.target.value;\n        const key = e.target.id;\n        const keyID = key.charAt(20)\n\n        dest[keyID] = value;\n\n        setEnquiry(prevEnquiy => {\n            return { ...prevEnquiy, destination: dest }\n        });\n    }\n\n\n    const remove = k => {\n        const keys = form.getFieldValue('keys');\n\n        if (keys.length === 1) { return; }\n\n        console.log(k);\n\n        dest.splice(k, 1);\n\n        console.log(enquiry.destination)\n\n        form.setFieldsValue({\n            keys: keys.filter(key => key !== k),\n        });\n\n        setEnquiry(prevEnquiy => {\n            return { ...prevEnquiy, destination: dest }\n        });\n    };\n\n    const addDestination = () => {\n        const keys = form.getFieldValue('keys');\n\n        const nextKeys = keys.concat(id++);\n\n        form.setFieldsValue({\n            keys: nextKeys,\n        });\n    };\n\n    const destinationFieldOptions = {\n        validateTrigger: ['onChange', 'onBlur'],\n        rules: [{\n            required: true,\n            message: <FormattedMessage id=\"Destination.required\" />,\n        },]\n    }\n\n    const formItemLayout = {\n        labelCol: {\n            xs: { span: 24 },\n            sm: { span: 5 },\n        },\n        wrapperCol: {\n            xs: { span: 24 },\n            sm: { span: 18 },\n        },\n    };\n\n    const formItemLayoutWithOutLabel = {\n        wrapperCol: {\n            xs: { span: 24, offset: 0 },\n            sm: { span: 18, offset: 5 },\n        },\n    };\n\n    getFieldDecorator('keys', { initialValue: [0] });\n\n    const keys = getFieldValue('keys');\n\n    const addMoreDestinations = () => {\n        if (enquiry.roundTrip === 'multiple') {\n            return true;\n        }\n        return false;\n    }\n\n    const destinationInputField = () => (\n        <Input placeholder={intl.formatMessage({id:\"Destination.placeholder\"})} style={{ width: '90%', marginRight: 5 }} size=\"large\" onChange={updateDestination} />\n    )\n\n    const formItems = keys.map((k, index) => (\n        < Form.Item\n            {...(index === 0 ? formItemLayout : formItemLayoutWithOutLabel)}\n            label={index === 0 ? <FormattedMessage id=\"Destination.label\" /> : ''}\n            required={false}\n            key={k} > {\n                getFieldDecorator(`destination[${k}]`, destinationFieldOptions)(destinationInputField())} {\n                keys.length > 1 ? (<\n                    Icon className=\"dynamic-delete-button\"\n                    type=\"minus-circle-o\"\n                    onClick={\n                        () => remove(k)\n                    }\n                    style={\n                        { margin: '0 5px' }\n                    }\n                />\n                ) : null\n            } {\n                addMoreDestinations() ? (< Icon className=\"dynamic-delete-button\" type=\"plus-circle-o\" onClick={() => addDestination(k)} />) : null\n            }\n        </Form.Item >\n    ));\n\n    return (\n        <>\n            {formItems}\n        </>\n\n    )\n}\n\nexport default Destination;\n\n\n"]},"metadata":{},"sourceType":"module"}